(function(a){a.masksLoad=function(b){var c;a.ajax({url:b,async:false,dataType:"json",success:function(d){c=d}});return c};a.masksSort=function(e,b,c,d){e.sort(function(i,g){var j=0,h=0;for(;(j<i[d].length&&h<g[d].length);){var f=i[d].charAt(j);var k=g[d].charAt(h);if(!c.test(f)){j++;continue}if(!c.test(k)){h++;continue}if(a.inArray(f,b)!=-1&&a.inArray(k,b)==-1){return 1}if(a.inArray(f,b)==-1&&a.inArray(k,b)!=-1){return -1}if(a.inArray(f,b)==-1&&a.inArray(k,b)==-1){if(f!=k){return f<k?-1:1}}j++;h++}for(;(j<i[d].length||h<g[d].length);){if(j<i[d].length&&!c.test(i[d].charAt(j))){j++;continue}if(h<g[d].length&&!c.test(g[d].charAt(h))){h++;continue}if(j<i[d].length){return 1}if(h<g[d].length){return -1}}return 0});return e};a.fn.inputmasks=function(d,q){var o=function(B,z){if(typeof B=="number"){z=(typeof z=="number")?z:B;if(this.setSelectionRange){this.setSelectionRange(B,z)}else{if(this.createTextRange){var A=this.createTextRange();A.collapse(true);A.moveEnd("character",z);A.moveStart("character",B);A.select()}}}else{if(this.setSelectionRange){B=this.selectionStart;z=this.selectionEnd}else{if(document.selection&&document.selection.createRange){var A=document.selection.createRange();B=0-A.duplicate().moveStart("character",-100000);z=B+A.text.length}}return{begin:B,end:z}}};var s=Object.keys||function(B){if(B!==Object(B)){throw new TypeError("Invalid object")}var A=[];for(var z in B){A[A.length]=z}return A};d=a.extend(true,{onMaskChange:a.noop},d);var c={};for(var r in d.inputmask.definitions){var j=d.inputmask.definitions[r].validator;switch(typeof j){case"string":c[r]=new RegExp(j);break;case"object":if("test" in d.definitions[r].validator){c[r]=j}break;case"function":c[r]={test:j};break}}d.inputmask.definitions[d.replace]={validator:d.match.source,cardinality:1};var f=navigator.userAgent.match(/iphone/i)!=null;var b=false;var l=a.extend(true,{},a.inputmask.defaults,d.inputmask).placeholder;var e=a.extend(true,{},a.inputmask.defaults,d.inputmask).insertMode;var h=function(J){var K="";for(var E=0;E<J.length;E++){var z=J.charAt(E);if(z==l){break}if(d.match.test(z)){K+=z}}for(var H in d.list){var L=d.list[H][d.listKey];var I=true;for(var D=0,G=0;(D<K.length&&G<L.length);){var F=L.charAt(G);var A=K.charAt(D);if(!d.match.test(F)&&!(F in c)){G++;continue}if(((F in c)&&c[F].test(A))||(A==F)){D++;G++}else{I=false;break}}if(I&&D==K.length){var B=L.substr(G).search(d.match)==-1;L=L.replace(new RegExp([d.match.source].concat(s(c)).join("|"),"g"),d.replace);var C=L.substr(G).search(d.replace)==-1;return{mask:L,obj:d.list[H],determined:B,completed:C}}}return false};var i=function(C,E,B){if(!C){return 0}var D=0,A=0;for(;D<B.begin;D++){if(C.charAt(D)==d.replace){A++}}var z=0;for(;D<B.end;D++){if(C.charAt(D)==d.replace){z++}}for(D=0;(D<E.length&&(A>0||E.charAt(D)!=d.replace));D++){if(E.charAt(D)==d.replace){A--}}A=D;for(;(D<E.length&&z>0);D++){if(E.charAt(D)==d.replace){z--}}z=D;return{begin:A,end:z}};var w=function(){a(this).unbind("keypress.inputmask",n).unbind("input.inputmask",t).unbind("paste.inputmask",t).unbind("dragdrop.inputmask",t).unbind("drop.inputmask",t).unbind("keydown.inputmask",u).unbind("setvalue.inputmask",v).unbind("blur.inputmask",m)};var y=function(){w.call(this);a(this).bindFirst("keypress.inputmask",n).bindFirst("input.inputmask",t).bindFirst("paste.inputmask",t).bindFirst("dragdrop.inputmask",t).bindFirst("drop.inputmask",t).bindFirst("keydown.inputmask",u).bindFirst("setvalue.inputmask",v).bind("blur.inputmask",m)};var p=function(A,B){if(A&&(B||A.mask!=b.mask)){var z;if(!B){z=i(b.mask,A.mask,o.call(this))}if(B){if(this._valueSet){this._valueSet(B)}else{this.value=B}}a(this).inputmask(A.mask,a.extend(true,d.inputmask,{insertMode:e}));if(!B){o.call(this,z.begin,z.end)}}b=A;d.onMaskChange.call(this,A.obj,A.determined);return true};var g=function(B,C,A){var z=h(C);if(!z||z.obj!=b.obj||z.determined!=b.determined){if(z){w.call(this);if(A){p.call(this,z);a(this).trigger(B)}else{a(this).trigger(B);p.call(this,z)}y.call(this)}B.stopImmediatePropagation();return false}return true};var u=function(C){C=C||window.event;var z=C.which||C.charCode||C.keyCode;if(z==8||z==46||(f&&z==127)){var D=this._valueGet();var A=o.call(this);if(A.begin==A.end||(!e&&A.begin==A.end-1)){var F=A.begin;do{if(z!=46){F--}var B=D.charAt(F);D=D.substring(0,F)+D.substring(F+1)}while(F>0&&F<D.length&&B!=l&&!d.match.test(B))}else{var E=D.substring(0,A.begin)+D.substring(A.end);if(E.search(d.match)==-1){D=E}}return g.call(this,C,D,false)}if(z==45){e=!e}return true};var n=function(A){var B=this._valueGet();A=A||window.event;var z=A.which||A.charCode||A.keyCode,C=String.fromCharCode(z);caretPos=o.call(this);B=B.substring(0,caretPos.begin)+C+B.substring(caretPos.end);return g.call(this,A,B,true)};var m=function(A){var z=h(this._valueGet());p.call(this,z);y.call(this);return true};var v=function(z){k.call(this);z.stopImmediatePropagation();return true};var k=function(){var A;if(this._valueGet){A=this._valueGet()}else{A=this.value}var z=h(A);while(!z&&A.length>0){A=A.substr(0,A.length-1);z=h(A)}p.call(this,z,A);y.call(this)};var t=function(A){var z=this;setTimeout(function(){k.call(z)},0);A.stopImmediatePropagation();return true};switch(q){case"isCompleted":var x=h((this[0]._valueGet&&this[0]._valueGet())||this[0].value);return(x&&x.completed);default:this.each(function(){k.call(this)});return this}}})(jQuery);