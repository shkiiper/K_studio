(function(a){if(a.fn.inputmask==undefined){a.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:a.noop,onincomplete:a.noop,oncleared:a.noop,repeat:0,greedy:true,autoUnmask:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},onKeyUp:a.noop,onKeyDown:a.noop,showMaskOnHover:true,numericInput:false,radixPoint:".",definitions:{"9":{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-z\u0410-\u044F\u0401\u0451]",cardinality:1},"*":{validator:"[A-Za-z\u0410-\u044F\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:a.fn.val};a.fn.inputmask=function(r,j){var y=a.extend(true,{},a.inputmask.defaults,j);var n=o("paste")?"paste":"input";var h=navigator.userAgent.match(/iphone/i)!=null;var J=navigator.userAgent.match(/android.*mobile safari.*/i)!=null;if(J){var I=navigator.userAgent.match(/mobile safari.*/i);var k=parseInt(new RegExp(/[0-9]+/).exec(I));J=k<=533}var A=null;if(typeof r=="string"){switch(r){case"mask":var d=t();var m=H();return this.each(function(){D(this)});break;case"unmaskedvalue":var m=this.data("inputmask")["tests"];var d=this.data("inputmask")["_buffer"];y.greedy=this.data("inputmask")["greedy"];y.repeat=this.data("inputmask")["repeat"];y.definitions=this.data("inputmask")["definitions"];return q(this);break;case"remove":var m,d;return this.each(function(){var L=a(this),K=this;setTimeout(function(){if(L.data("inputmask")){m=L.data("inputmask")["tests"];d=L.data("inputmask")["_buffer"];y.greedy=L.data("inputmask")["greedy"];y.repeat=L.data("inputmask")["repeat"];y.definitions=L.data("inputmask")["definitions"];K._valueSet(q(L,true));L.removeData("inputmask");L.unbind(".inputmask");L.removeClass("focus.inputmask");var M;if(Object.getOwnPropertyDescriptor){M=Object.getOwnPropertyDescriptor(K,"value")}if(M&&M.get){if(K._valueGet){Object.defineProperty(K,"value",{get:K._valueGet,set:K._valueSet})}}else{if(document.__lookupGetter__&&K.__lookupGetter__("value")){if(K._valueGet){K.__defineGetter__("value",K._valueGet);K.__defineSetter__("value",K._valueSet)}}}delete K._valueGet;delete K._valueSet}},0)});break;case"getemptymask":if(this.data("inputmask")){return this.data("inputmask")["_buffer"].join("")}else{return""}case"hasMaskedValue":return this.data("inputmask")?!this.data("inputmask")["autoUnmask"]:false;default:if(!G(r)){y.mask=r}var d=t();var m=H();return this.each(function(){D(this)});break}}if(typeof r=="object"){y=a.extend(true,{},a.inputmask.defaults,r);G(y.alias);var d=t();var m=H();return this.each(function(){D(this)})}function o(K){var M=document.createElement("input"),K="on"+K,L=(K in M);if(!L){M.setAttribute(K,"return;");L=typeof M[K]=="function"}M=null;return L}function G(L){var K=y.aliases[L];if(K){if(K.alias){G(K.alias)}a.extend(true,y,K);a.extend(true,y,j);return true}return false}function t(){var O=false,L=0;if(y.mask.length==1&&y.greedy==false){y.placeholder=""}var K=a.map(y.mask.split(""),function(R,P){var T=[];if(R==y.escapeChar){O=true}else{if((R!=y.optionalmarker.start&&R!=y.optionalmarker.end)||O){var S=y.definitions[R];if(S&&!O){for(var Q=0;Q<S.cardinality;Q++){T.push(F(L+Q))}}else{T.push(R);O=false}L+=T.length;return T}}});var M=K.slice();for(var N=1;N<y.repeat&&y.greedy;N++){M=M.concat(K.slice())}return M}function H(){var K=false,M=false;var L=false;return a.map(y.mask.split(""),function(P,R){var T=[];if(P==y.escapeChar){M=true}else{if(P==y.optionalmarker.start&&!M){K=true;L=true}else{if(P==y.optionalmarker.end&&!M){K=false;L=true}else{var O=y.definitions[P];if(O&&!M){var U=O.prevalidator,W=U?U.length:0;for(var Q=1;Q<O.cardinality;Q++){var V=W>=Q?U[Q-1]:[],N=V.validator,S=V.cardinality;T.push({fn:N?typeof N=="string"?new RegExp(N):new function(){this.test=N}:new RegExp("."),cardinality:S?S:1,optionality:K,newBlockMarker:K==true?L:false,offset:0,casing:O.casing,def:P});if(K==true){L=false}}T.push({fn:O.validator?typeof O.validator=="string"?new RegExp(O.validator):new function(){this.test=O.validator}:new RegExp("."),cardinality:O.cardinality,optionality:K,newBlockMarker:L,offset:0,casing:O.casing,def:P})}else{T.push({fn:null,cardinality:0,optionality:K,newBlockMarker:L,offset:0,casing:null,def:P});M=false}L=false;return T}}}})}function C(R,Q,M,L){if(R<0||R>=B()){return false}var P=l(R),K=Q?1:0,O="";for(var N=m[P].cardinality;N>K;N--){O+=v(M,P-(N-1))}if(Q){O+=Q}return m[P].fn!=null?m[P].fn.test(O,M,R,L,y):false}function E(M){var K=l(M);var L=m[K];return L!=undefined?L.fn:false}function l(K){return K%m.length}function F(K){return y.placeholder.charAt(K%y.placeholder.length)}function B(){var K=d.length;if(!y.greedy&&y.repeat>1){K+=(d.length*(y.repeat-1))}return K}function g(L,N){var M=B();if(N>=M){return M}var K=N;while(++K<M&&!E(K)){}return K}function f(L,M){var K=M;if(K<=0){return 0}while(--K>0&&!E(K)){}return K}function e(L,K,M){var O=m[l(K)];var N=M;if(N!=undefined){switch(O.casing){case"upper":N=M.toUpperCase();break;case"lower":N=M.toLowerCase();break}}L[K]=N}function v(L,K,M){if(M){K=u(L,K)}return L[K]}function u(L,K,N){var M;if(N){while(K<0&&L.length<B()){M=d.length-1;K=d.length;while(d[M]!==undefined){L.unshift(d[M--])}}}else{while(L[K]==undefined&&L.length<B()){M=0;while(d[M]!==undefined){L.push(d[M++])}}}return K}function w(L,K,M){L._valueSet(K.join(""));if(M!=undefined){if(J){setTimeout(function(){x(L,M)},100)}else{x(L,M)}}}function b(L,O,K){for(var M=O,N=B();M<K&&M<N;M++){e(L,M,v(d.slice(),M))}}function z(K,M){var L=l(M);e(K,M,v(d,L))}function s(Q,U,S,T){var M=a(Q).data("inputmask")["isRTL"],aa=i(Q._valueGet(),M).split("");if(M){var L=B();var R=aa.reverse();R.length=L;for(var V=0;V<L;V++){var P=l(L-(V+1));if(m[P].fn==null&&R[V]!=v(d,P)){R.splice(V,0,v(d,P));R.length=L}else{R[V]=R[V]||v(d,P)}}aa=R.reverse()}b(U,0,U.length);U.length=d.length;var X=-1,Y=-1,K,L=B(),ab=aa.length,O=ab==0?L:-1;for(var V=0;V<ab;V++){for(var N=Y+1;N<L;N++){if(E(N)){var Z=aa[V];if((K=C(N,Z,U,!S))!==false){if(K!==true){N=K.pos||N;Z=K.c||Z}e(U,N,Z);X=Y=N}else{z(U,N);if(Z==F(N)){Y=N;O=N}}break}else{z(U,N);if(X==Y){X=N}Y=N;if(aa[V]==v(U,N)){break}}}}if(y.greedy==false){var W=i(U.join(""),M).split("");while(U.length!=W.length){M?U.shift():U.pop()}}if(S){w(Q,U)}return M?(y.numericInput?(a.inArray(y.radixPoint,U)!=-1&&T!==true?a.inArray(y.radixPoint,U):g(U,L)):g(U,O)):g(U,X)}function c(L){var K=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return L.replace(new RegExp("(\\"+K.join("|\\")+")","gim"),"\\$1")}function i(K,L){return L?K.replace(new RegExp("^("+c(d.join(""))+")*"),""):K.replace(new RegExp("("+c(d.join(""))+")*$"),"")}function p(L,K){s(L,K,false);var N=K.slice();if(a(L).data("inputmask")["isRTL"]){for(var O=0;O<=N.length-1;O++){var M=l(O);if(m[M].optionality){if(F(O)==K[O]||!E(O)){N.splice(0,1)}else{break}}else{break}}}else{for(var O=N.length-1;O>=0;O--){var M=l(O);if(m[M].optionality){if(F(O)==K[O]||!E(O)){N.pop()}else{break}}else{break}}}w(L,N)}function q(N,M){var L=N[0];if(m&&(M===true||!N.hasClass("hasDatepicker"))){var K=d.slice();s(L,K);return a.map(K,function(P,O){return E(O)&&P!=v(d.slice(),O)?P:null}).join("")}else{return L._valueGet()}}function x(M,N,K){var Q=M.jquery&&M.length>0?M[0]:M;if(typeof N=="number"){K=(typeof K=="number")?K:N;if(y.insertMode==false&&N==K){K++}if(Q.setSelectionRange){Q.setSelectionRange(N,K)}else{if(Q.createTextRange){var L=Q.createTextRange();L.collapse(true);L.moveEnd("character",K);L.moveStart("character",N);L.select()}}Q.focus();if(J&&K!=Q.selectionEnd){O={begin:N,end:K}}}else{var P=J?O:null,O=null;if(P==null){if(Q.setSelectionRange){N=Q.selectionStart;K=Q.selectionEnd}else{if(document.selection&&document.selection.createRange){var L=document.selection.createRange();N=0-L.duplicate().moveStart("character",-100000);K=N+L.text.length}}P={begin:N,end:K}}return P}}function D(L){var K=a(L);if(!K.is(":input")){return}y.greedy=y.greedy?y.greedy:y.repeat==0;var R=K.prop("maxLength");if(B()>R&&R>-1){if(R<d.length){d.length=R}if(y.greedy==false){y.repeat=Math.round(R/d.length)}}K.prop("maxLength",B()*2);K.data("inputmask",{tests:m,_buffer:d,greedy:y.greedy,repeat:y.repeat,autoUnmask:y.autoUnmask,definitions:y.definitions,isRTL:false});ac(L);var Z=d.slice(),aa=L._valueGet(),X=false,W=false,Y=-1,af=g(Z,-1),V=f(Z,B()),Q=false;if(L.dir=="rtl"||y.numericInput){L.dir="ltr";K.css("text-align","right");K.removeAttr("dir");var U=K.data("inputmask");U.isRTL=true;K.data("inputmask",U);Q=true}K.unbind(".inputmask");K.removeClass("focus.inputmask");K.bind("mouseenter.inputmask",function(){var ai=a(this),ag=this;if(!ai.hasClass("focus.inputmask")&&y.showMaskOnHover){var ah=ag._valueGet().length;if(ah<Z.length){if(ah==0){Z=d.slice()}w(ag,Z)}}}).bind("blur.inputmask",function(){var ai=a(this),ag=this,ah=ag._valueGet();ai.removeClass("focus.inputmask");if(ah!=aa){ai.change()}if(y.clearMaskOnLostFocus){if(ah==d.join("")){ag._valueSet("")}else{p(ag,Z)}}if(!T(ag)){ai.trigger("incomplete");if(y.clearIncomplete){if(y.clearMaskOnLostFocus){ag._valueSet("")}else{Z=d.slice();w(ag,Z)}}}}).bind("focus.inputmask",function(){var ai=a(this),ag=this;if(!ai.hasClass("focus.inputmask")&&!y.showMaskOnHover){var ah=ag._valueGet().length;if(ah<Z.length){if(ah==0){Z=d.slice()}x(ag,s(ag,Z,true))}}ai.addClass("focus.inputmask");aa=ag._valueGet()}).bind("mouseleave.inputmask",function(){var ah=a(this),ag=this;if(y.clearMaskOnLostFocus){if(!ah.hasClass("focus.inputmask")){if(ag._valueGet()==d.join("")||ag._valueGet()==""){ag._valueSet("")}else{p(ag,Z)}}}}).bind("click.inputmask",function(){var ag=this;setTimeout(function(){var ai=x(ag);if(ai.begin==ai.end){var ah=ai.begin;Y=s(ag,Z,false);if(Q){x(ag,ah>Y&&(C(ah,Z[ah],Z,true)!==false||!E(ah))?ah:Y)}else{x(ag,ah<Y&&(C(ah,Z[ah],Z,true)!==false||!E(ah))?ah:Y)}}},0)}).bind("dblclick.inputmask",function(){var ag=this;setTimeout(function(){x(ag,0,Y)},0)}).bind("keydown.inputmask",O).bind("keypress.inputmask",ab).bind("keyup.inputmask",ae).bind(n+".inputmask, dragdrop.inputmask, drop.inputmask",function(){var ag=this;setTimeout(function(){x(ag,s(ag,Z,true))},0)}).bind("setvalue.inputmask",function(){var ag=this;aa=ag._valueGet();s(ag,Z,true);if(ag._valueGet()==d.join("")){ag._valueSet("")}}).bind("complete.inputmask",y.oncomplete).bind("incomplete.inputmask",y.onincomplete).bind("cleared.inputmask",y.oncleared);Y=s(L,Z,true);var S;try{S=document.activeElement}catch(ad){}if(S===L){K.addClass("focus.inputmask");x(L,Y)}else{if(y.clearMaskOnLostFocus){if(L._valueGet()==d.join("")){L._valueSet("")}else{p(L,Z)}}}N(L);function T(ai){var ag=true,ak=ai._valueGet(),aj=ak.length;for(var ah=0;ah<aj;ah++){if(E(ah)&&ak.charAt(ah)==F(ah)){ag=false;break}}return ag}function N(ah){var ag=a._data(ah).events;a.each(ag,function(ak,al){a(ah).bind(ak+".inputmask",function(am){if(this.readOnly||this.disabled){am.stopPropagation();am.stopImmediatePropagation();am.preventDefault();return false}});var ai=al[al.length-1];for(var aj=al.length-1;aj>0;aj--){al[aj]=al[aj-1]}al[0]=ai})}function ac(ah){var ag;if(Object.getOwnPropertyDescriptor){ag=Object.getOwnPropertyDescriptor(ah,"value")}if(ag&&ag.get){if(!ah._valueGet){ah._valueGet=ag.get;ah._valueSet=ag.set;Object.defineProperty(ah,"value",{get:function(){var aj=a(this),ai=a(this).data("inputmask");return ai&&ai.autoUnmask?aj.inputmask("unmaskedvalue"):this._valueGet()!=ai._buffer.join("")?this._valueGet():""},set:function(ai){this._valueSet(ai);a(this).triggerHandler("setvalue.inputmask")}})}}else{if(document.__lookupGetter__&&ah.__lookupGetter__("value")){if(!ah._valueGet){ah._valueGet=ah.__lookupGetter__("value");ah._valueSet=ah.__lookupSetter__("value");ah.__defineGetter__("value",function(){var aj=a(this),ai=a(this).data("inputmask");return ai&&ai.autoUnmask?aj.inputmask("unmaskedvalue"):this._valueGet()!=ai._buffer.join("")?this._valueGet():""});ah.__defineSetter__("value",function(ai){this._valueSet(ai);a(this).triggerHandler("setvalue.inputmask")})}}else{if(!ah._valueGet){ah._valueGet=function(){return this.value};ah._valueSet=function(ai){this.value=ai}}if(a.fn.val.inputmaskpatch!=true){a.fn.val=function(){if(arguments.length==0){var ak=a(this);if(ak.data("inputmask")){if(ak.data("inputmask")["autoUnmask"]){return ak.inputmask("unmaskedvalue")}else{var ai=a.inputmask.val.apply(ak);return ai!=ak.data("inputmask")["_buffer"].join("")?ai:""}}else{return a.inputmask.val.apply(ak)}}else{var aj=arguments;return this.each(function(){var am=a(this);var al=a.inputmask.val.apply(am,aj);if(am.data("inputmask")){am.triggerHandler("setvalue.inputmask")}return al})}};a.extend(a.fn.val,{inputmaskpatch:true})}}}}function P(al,ag,ak){while(!E(al)&&al-1>=0){al--}for(var ai=al;ai<ag&&ai<B();ai++){if(E(ai)){z(Z,ai);var ah=g(Z,ai);var aj=v(Z,ah);if(aj!=F(ah)){if(ah<B()&&C(ai,aj,Z,true)!==false&&m[l(ai)].def==m[l(ah)].def){e(Z,ai,v(Z,ah));z(Z,ah)}else{if(E(ai)){break}}}else{if(ak==undefined){break}}}else{z(Z,ai)}}if(ak!=undefined){e(Z,Q?ag:f(Z,ag),ak)}Z=i(Z.join(""),Q).split("");if(Z.length==0){Z=d.slice()}return al}function M(an,ah,am,al){for(var ak=an;ak<=ah&&ak<B();ak++){if(E(ak)){var aj=v(Z,ak);e(Z,ak,am);if(aj!=F(ak)){var ai=g(Z,ak);if(ai<B()){if(C(ai,aj,Z,true)!==false&&m[l(ak)].def==m[l(ai)].def){am=aj}else{if(E(ai)){break}else{am=aj}}}else{break}}else{if(al!==true){break}}}else{z(Z,ak)}}var ag=Z.length;Z=i(Z.join(""),Q).split("");if(Z.length==0){Z=d.slice()}return ah-(ag-Z.length)}function O(ak){X=false;var ao=this,ag=ak.keyCode,an=x(ao);if(y.numericInput){var aj=ao._valueGet();var ai=aj.indexOf(y.radixPoint);if(ai!=-1){Q=an.begin<=ai||an.end<=ai}}if(ag==y.keyCode.BACKSPACE||ag==y.keyCode.DELETE||(h&&ag==127)){var al=B();if(an.begin==0&&an.end==al){Z=d.slice();w(ao,Z);x(ao,s(ao,Z,false))}else{if((an.end-an.begin)>1||((an.end-an.begin)==1&&y.insertMode)){b(Z,an.begin,an.end);w(ao,Z,Q?s(ao,Z,false):an.begin)}else{var am=an.begin-(ag==y.keyCode.DELETE?0:1);if(am<af&&ag==y.keyCode.DELETE){am=af}if(am>=af){if(y.numericInput&&y.greedy&&ag==y.keyCode.DELETE&&Z[am]==y.radixPoint){am=g(Z,am);Q=false}if(Q){am=M(af,am,F(am),true);am=(y.numericInput&&y.greedy&&ag==y.keyCode.BACKSPACE&&Z[am+1]==y.radixPoint)?am+1:g(Z,am)}else{am=P(am,al)}w(ao,Z,am)}}}if(ao._valueGet()==d.join("")){a(ao).trigger("cleared")}return false}else{if(ag==y.keyCode.END||ag==y.keyCode.PAGE_DOWN){setTimeout(function(){var ap=s(ao,Z,false,true);if(!y.insertMode&&ap==B()&&!ak.shiftKey){ap--}x(ao,ak.shiftKey?an.begin:ap,ap)},0);return false}else{if(ag==y.keyCode.HOME||ag==y.keyCode.PAGE_UP){x(ao,0,ak.shiftKey?an.begin:0);return false}else{if(ag==y.keyCode.ESCAPE){ao._valueSet(aa);x(ao,0,s(ao,Z));return false}else{if(ag==y.keyCode.INSERT){y.insertMode=!y.insertMode;x(ao,!y.insertMode&&an.begin==B()?an.begin-1:an.begin);return false}else{if(ak.ctrlKey&&ag==88){setTimeout(function(){x(ao,s(ao,Z,true))},0)}else{if(!y.insertMode){if(ag==y.keyCode.RIGHT){var ah=an.begin==an.end?an.end+1:an.end;ah=ah<B()?ah:an.end;x(ao,ak.shiftKey?an.begin:ah,ak.shiftKey?ah+1:ah);return false}else{if(ag==y.keyCode.LEFT){var ah=an.begin-1;ah=ah>0?ah:0;x(ao,ah,ak.shiftKey?an.end:ah);return false}}}}}}}}}y.onKeyDown.call(this,ak,y);W=a.inArray(ag,y.ignorables)!=-1}function ab(ap){if(X){return false}X=true;var av=this,at=a(av);ap=ap||window.event;var ai=ap.which||ap.charCode||ap.keyCode;if(y.numericInput&&ai==y.radixPoint.charCodeAt(y.radixPoint.length-1)){var am=av._valueGet();var ak=am.indexOf(y.radixPoint);x(av,g(Z,ak!=-1?ak:B()))}if(ap.ctrlKey||ap.altKey||ap.metaKey||W){return true}else{if(ai){at.trigger("input");var au=x(av),ar=String.fromCharCode(ai),aq=B();b(Z,au.begin,au.end);if(Q){var ag=y.numericInput?au.end:f(Z,au.end),aw;if((aw=C(ag==aq||v(Z,ag)==y.radixPoint?f(Z,ag):ag,ar,Z,false))!==false){if(aw!==true){ag=aw.pos||au;ar=aw.c||ar}var ao=af;if(y.insertMode==true){if(y.greedy==true){var ah=Z.slice();while(v(ah,ao,true)!=F(ao)&&ao<=ag){ao=ao==aq?(aq+1):g(Z,ao)}}if(ao<=ag&&(y.greedy||Z.length<aq)){if(Z[af]!=F(af)&&Z.length<aq){var aj=u(Z,-1,Q);if(au.end!=0){ag=ag+aj}aq=Z.length}P(ao,y.numericInput?f(Z,ag):ag,ar)}else{return false}}else{e(Z,y.numericInput?f(Z,ag):ag,ar)}w(av,Z,y.numericInput&&ag==0?g(Z,ag):ag);setTimeout(function(){if(T(av)){at.trigger("complete")}},0)}else{if(J){w(av,Z,au.begin)}}}else{var ag=g(Z,au.begin-1),aw;u(Z,ag,Q);if((aw=C(ag,ar,Z,false))!==false){if(aw!==true){ag=aw.pos||ag;ar=aw.c||ar}if(y.insertMode==true){var an=B();var ah=Z.slice();while(v(ah,an,true)!=F(an)&&an>=ag){an=an==0?-1:f(Z,an)}if(an>=ag){M(ag,Z.length,ar)}else{return false}}else{e(Z,ag,ar)}var al=g(Z,ag);w(av,Z,al);setTimeout(function(){if(T(av)){at.trigger("complete")}},0)}else{if(J){w(av,Z,au.begin)}}}return false}}}function ae(ai){var aj=a(this),ah=this;var ag=ai.keyCode;y.onKeyUp.call(this,ai,y);if(ag==y.keyCode.TAB&&aj.hasClass("focus.inputmask")&&ah._valueGet().length==0){Z=d.slice();w(ah,Z);if(!Q){x(ah,0)}aa=ah._valueGet()}}}}}})(jQuery);